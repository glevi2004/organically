[debug] [2025-12-07T09:17:39.930Z] ----------------------------------------------------------------------
[debug] [2025-12-07T09:17:39.937Z] Command:       /opt/homebrew/Cellar/node/23.11.0/bin/node /opt/homebrew/bin/firebase deploy --only firestore:rules
[debug] [2025-12-07T09:17:39.937Z] CLI Version:   14.12.0
[debug] [2025-12-07T09:17:39.937Z] Platform:      darwin
[debug] [2025-12-07T09:17:39.937Z] Node Version:  v23.11.0
[debug] [2025-12-07T09:17:39.937Z] Time:          Sun Dec 07 2025 04:17:39 GMT-0500 (Eastern Standard Time)
[debug] [2025-12-07T09:17:39.937Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-12-07T09:17:40.033Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-12-07T09:17:40.034Z] > authorizing via signed-in user (leviramosgabriel2021@gmail.com)
[debug] [2025-12-07T09:17:40.034Z] [iam] checking project organically-2f124 for permissions ["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get"]
[debug] [2025-12-07T09:17:40.034Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:40.034Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:40.035Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/organically-2f124:testIamPermissions [none]
[debug] [2025-12-07T09:17:40.035Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/organically-2f124:testIamPermissions x-goog-quota-user=projects/organically-2f124
[debug] [2025-12-07T09:17:40.035Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/organically-2f124:testIamPermissions {"permissions":["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get"]}
[debug] [2025-12-07T09:17:40.258Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/organically-2f124:testIamPermissions 200
[debug] [2025-12-07T09:17:40.258Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/organically-2f124:testIamPermissions {"permissions":["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get"]}
[info] 
[info] === Deploying to 'organically-2f124'...
[info] 
[info] i  deploying firestore 
[info] i  cloud.firestore: checking src/firebase/firestore.rules for compilation errors... 
[debug] [2025-12-07T09:17:40.260Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:40.260Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:40.260Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/organically-2f124:test [none]
[debug] [2025-12-07T09:17:40.260Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/organically-2f124:test [omitted]
[debug] [2025-12-07T09:17:40.589Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/organically-2f124:test 200
[debug] [2025-12-07T09:17:40.589Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/organically-2f124:test {}
[info] ✔  cloud.firestore: rules file src/firebase/firestore.rules compiled successfully 
[debug] [2025-12-07T09:17:40.591Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:40.591Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:40.591Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/organically-2f124/databases/(default) [none]
[debug] [2025-12-07T09:17:40.924Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/organically-2f124/databases/(default) 200
[debug] [2025-12-07T09:17:40.924Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/organically-2f124/databases/(default) {"name":"projects/organically-2f124/databases/(default)","uid":"79219953-cf4e-4f74-aeb4-ee624555d8c6","createTime":"2025-12-01T05:11:17.118971Z","updateTime":"2025-12-01T05:11:17.118971Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-12-07T08:17:40.919278Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","databaseEdition":"STANDARD","freeTier":true,"realtimeUpdatesMode":"REALTIME_UPDATES_MODE_ENABLED","etag":"IPnxk7SSq5EDMKeijrD0m5ED"}
[debug] [2025-12-07T09:17:40.926Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:40.926Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:40.926Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/organically-2f124/releases pageSize=10&pageToken=
[debug] [2025-12-07T09:17:41.123Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/organically-2f124/releases 200
[debug] [2025-12-07T09:17:41.123Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/organically-2f124/releases {"releases":[{"name":"projects/organically-2f124/releases/cloud.firestore","rulesetName":"projects/organically-2f124/rulesets/452e68ac-cf09-450c-ac0b-8866c940c1fa","createTime":"2025-12-01T05:11:21.754877Z","updateTime":"2025-12-07T09:00:32.690008Z"},{"name":"projects/organically-2f124/releases/firebase.storage/organically-2f124.firebasestorage.app","rulesetName":"projects/organically-2f124/rulesets/7af2bc46-d2db-40c3-b45c-333535aad723","createTime":"2025-12-01T11:01:58.085017Z","updateTime":"2025-12-07T08:42:26.200310Z"}]}
[debug] [2025-12-07T09:17:41.160Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:41.160Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:41.160Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/organically-2f124/rulesets/452e68ac-cf09-450c-ac0b-8866c940c1fa [none]
[debug] [2025-12-07T09:17:41.323Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/organically-2f124/rulesets/452e68ac-cf09-450c-ac0b-8866c940c1fa 200
[debug] [2025-12-07T09:17:41.323Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/organically-2f124/rulesets/452e68ac-cf09-450c-ac0b-8866c940c1fa [omitted]
[info] i  firestore: uploading rules src/firebase/firestore.rules... 
[debug] [2025-12-07T09:17:41.324Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:41.324Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:41.324Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/organically-2f124/rulesets [none]
[debug] [2025-12-07T09:17:41.324Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/organically-2f124/rulesets [omitted]
[debug] [2025-12-07T09:17:41.756Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/organically-2f124/rulesets 200
[debug] [2025-12-07T09:17:41.756Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/organically-2f124/rulesets {"name":"projects/organically-2f124/rulesets/c69409f4-45a2-4f8b-a4ef-3b0051cee897","source":{"files":[{"content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // --- Helper Functions ---\n    function isAuthenticated() {\n      return request.auth != null;\n    }\n\n    function isOwner(userId) {\n      return isAuthenticated() && request.auth.uid == userId;\n    }\n\n    // --- USERS COLLECTION ---\n    match /users/{userId} {\n      allow read: if isOwner(userId);\n      allow create: if isOwner(userId);\n      allow update: if isOwner(userId);\n      allow delete: if isOwner(userId);\n    }\n\n\n    // --- ORGANIZATIONS COLLECTION ---\n    match /organizations/{organizationId} {\n      // Allow read if user is authenticated (query will filter by userId)\n      allow read: if isAuthenticated();\n      \n      // Create: must be authenticated and set userId to own uid\n      allow create: if isAuthenticated()\n                    && request.resource.data.userId == request.auth.uid\n                    && request.resource.data.name is string;\n\n      // Update: must own the document (check existing data)\n      allow update: if isAuthenticated()\n                    && resource.data.userId == request.auth.uid;\n\n      // Delete: must own the document\n      allow delete: if isAuthenticated() \n                    && resource.data.userId == request.auth.uid;\n    }\n\n\n    // --- POSTS COLLECTION ---\n    match /posts/{postId} {\n      // Allow read if user is authenticated (query will filter by userId)\n      allow read: if isAuthenticated();\n\n      // Create: must be authenticated and set userId to own uid\n      allow create: if isAuthenticated()\n                    && request.resource.data.userId == request.auth.uid;\n\n      // Update: must own the document\n      allow update: if isAuthenticated()\n                    && resource.data.userId == request.auth.uid;\n\n      // Delete: must own the document\n      allow delete: if isAuthenticated() \n                    && resource.data.userId == request.auth.uid;\n    }\n\n\n    // --- IDEAS COLLECTION ---\n    match /ideas/{ideaId} {\n      // Allow read if user is authenticated (query will filter by userId)\n      allow read: if isAuthenticated();\n\n      // Create: must be authenticated and set userId to own uid\n      allow create: if isAuthenticated()\n                    && request.resource.data.userId == request.auth.uid;\n\n      // Update: must own the document\n      allow update: if isAuthenticated()\n                    && resource.data.userId == request.auth.uid;\n\n      // Delete: must own the document\n      allow delete: if isAuthenticated() \n                    && resource.data.userId == request.auth.uid;\n    }\n\n    // Default deny\n    match /{document=**} {\n      allow read, write: if false;\n    }\n  }\n}\n","name":"src/firebase/firestore.rules"}]},"createTime":"2025-12-07T09:17:41.618911Z","metadata":{"services":["cloud.firestore"]}}
[debug] [2025-12-07T09:17:41.756Z] [rules] created ruleset projects/organically-2f124/rulesets/c69409f4-45a2-4f8b-a4ef-3b0051cee897
[debug] [2025-12-07T09:17:41.757Z] [rules] releasing cloud.firestore/(default) with ruleset projects/organically-2f124/rulesets/c69409f4-45a2-4f8b-a4ef-3b0051cee897
[debug] [2025-12-07T09:17:41.757Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:41.757Z] Checked if tokens are valid: true, expires at: 1765100541407
[debug] [2025-12-07T09:17:41.757Z] >>> [apiv2][query] PATCH https://firebaserules.googleapis.com/v1/projects/organically-2f124/releases/cloud.firestore/(default) [none]
[debug] [2025-12-07T09:17:41.757Z] >>> [apiv2][body] PATCH https://firebaserules.googleapis.com/v1/projects/organically-2f124/releases/cloud.firestore/(default) {"release":{"name":"projects/organically-2f124/releases/cloud.firestore/(default)","rulesetName":"projects/organically-2f124/rulesets/c69409f4-45a2-4f8b-a4ef-3b0051cee897"}}
[debug] [2025-12-07T09:17:42.111Z] <<< [apiv2][status] PATCH https://firebaserules.googleapis.com/v1/projects/organically-2f124/releases/cloud.firestore/(default) 200
[debug] [2025-12-07T09:17:42.111Z] <<< [apiv2][body] PATCH https://firebaserules.googleapis.com/v1/projects/organically-2f124/releases/cloud.firestore/(default) {"name":"projects/organically-2f124/releases/cloud.firestore","rulesetName":"projects/organically-2f124/rulesets/c69409f4-45a2-4f8b-a4ef-3b0051cee897","createTime":"2025-12-01T05:11:21.754877Z","updateTime":"2025-12-07T09:17:42.088256Z"}
[debug] [2025-12-07T09:17:42.111Z] [rules] updated release projects/organically-2f124/releases/cloud.firestore
[info] ✔  firestore: released rules src/firebase/firestore.rules to cloud.firestore 
[info] 
[info] ✔  Deploy complete! 
[info] 
[info] Project Console: https://console.firebase.google.com/project/organically-2f124/overview
